package game;

public class Piece {
	private Player player;
	private Board b = null;
	private int [] coords = new int[2];
	private int connectCount = 1;
	
	public Piece(Player p) {
		this.player = p;
	}
	
	public void setBoard(Board b ) {
		this.b = b;
	}
	public Board getBoard() {
		return this.b;
	}
	
	public int[] getCoords() {
		return this.coords.clone();
	}
	
	public void setCoords(int[] coords) {
		if(this.b == null)
			throw new IllegalStateException("board must be not be null to set coordinates");
		if(coords.length != 2) 
			throw new IllegalArgumentException("coordinate array must be length 2");
		
		if(0 < coords[0] || coords[0] > b.getHeight() -1 || 0 < coords[1] || coords[1] > b.getWidth() - 1) 
			throw new IllegalArgumentException("Coordinates cannot be outside the bounds of the board");
		
		
		this.coords = coords;
		updateConnect4();
	}
	
	private void updateConnect4() {
		//get location on board; (don't have to check for nulls since only being called after setting coords
		//ALSO recall board must be at least 4x4 so don't have to check two boundaries at once
		Piece[][] board = this.b.getBoard();
		int row = this.coords[0];
		int col = this.coords[1];
		Piece n1;
		Piece n2;
		
		int newMax = this.connectCount;
//		board should look something like this
//		_ _ _
//		_ p _
//		_ _ _
		if(row - 1 >= 0) {
			n1 = board[row-1][col];
			if(n1 != null)
				newMax = Math.max(newMax, n1.sumConnect4(this) + this.connectCount);
		}
		if(row + 1 < this.b.getHeight()) {
			n1 = board[row+1][col];
			if(n1 != null)
				newMax = Math.max(newMax, n1.sumConnect4(this) + this.connectCount);
		}
		
		//sum up connections on opposite sides
		
		//if sum >= 4 then you got a connect 4
	}
	
	private int sumConnect4(Piece prev) {
		if(this.player.getColour() != prev.player.getColour())
			return 0;
		
		return 0;
	}
	
	public boolean hasConnect4() {
		return this.connectCount >= 4;
	}
	
	
	public String toString() {
		//return Character.toString(this.player.getColour().name().charAt(0));
		return Integer.toString(connectCount);
	}
}
